function isNullOrUndefined(e){return null==e}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function numberFormat(e,t){return Math.abs(Number(e))>=1e9?0===t?parseFloat((Math.abs(Number(e))/1e9).toFixed(2)):parseFloat((Math.abs(Number(e))/1e9).toFixed(2))+" b":Math.abs(Number(e))>=1e6?0===t?parseFloat((Math.abs(Number(e))/1e6).toFixed(2)):parseFloat((Math.abs(Number(e))/1e6).toFixed(2))+" m":Math.abs(Number(e))>=1e3?0===t?parseFloat((Math.abs(Number(e))/1e3).toFixed(2)):parseFloat((Math.abs(Number(e))/1e3).toFixed(2))+" k":Math.abs(Number(e))}function random(e,t){return Math.floor(Math.random()*(t-e+1))+e}function isCombat(){return window.location.hash.indexOf("#raid_multi/")>-1||window.location.hash.indexOf("#raid/")>-1}function pResetBonus(){var e=document.querySelector("div.prt-bonus-reset-button.btn-bonus-reset.weapon");!isNullOrUndefined(e)&&simulateClick(e)}function pSpaceBar(e){var t,n=["div.btn-usual-ok","div.btn-usual-ok.btn-summon-use","div.btn-settle","div.btn-synthesis","div.btn-usual-text.exchange","div.btn-usual-text.buy","div.btn-evolution.active","div.btn-use-item","div.btn-follow-again","div.btn-usual-exchange","div.btn-move-division","div.btn-usual-close"],i=document.querySelector(n[0]);if(isNullOrUndefined(i))for(var o=1;o<n.length;o++){var a=document.querySelector(n[o]);isNullOrUndefined(a)?"div.btn-evolution.active"===n[o]&&(t=document.querySelector("#btn-evolution")):t=a}else t=document.querySelector(n[0]).className.includes("btn-usual-ok")?document.querySelector(n[0]):document.querySelectorAll(n[0])[1];if(!isNullOrUndefined(t)){var u=document.querySelector("div.onm-anim-mask");if(!isNullOrUndefined(u)&&"none"===getComputedStyle(u).getPropertyValue("display"))return void simulateClick(u);simulateClick(t)}}var simulateClick=function(e){try{var t=e.getBoundingClientRect(),n=t.top,i=t.left,o=random(t.bottom,t.top),a=random(t.right,t.left),u=.1*(t.height+t.width),r={bubbles:!0,clientX:a,clientY:o},l=new MouseEvent("mouseover",{bubbles:!0,clientX:i,clientY:n}),d=new MouseEvent("mousedown",r),s=new MouseEvent("mouseup",r),c=new MouseEvent("click",r);e.dispatchEvent(l),window.setTimeout(function(){e.dispatchEvent(d)},u),window.setTimeout(function(){e.dispatchEvent(s),e.dispatchEvent(c)},u*random(.99,1.2))}catch(e){}},combat=[81,87,69,82],combat2=[49,50,51,52];document.addEventListener("keydown",function(e){if(32===e.which){for(var t=!0,n=document.querySelectorAll("textarea"),i=0;i<n.length;i++)isNullOrUndefined(n[i].getAttribute("disabled")&&1==n[i].getAttribute("disabled"))||(t=!1);if(t)return!0;pSpaceBar(e),e.preventDefault(),e.stopPropagation()}if(67===e.keyCode&&pCA(),82===e.keyCode&&pResetBonus(),"Escape"===e.key||"Esc"===e.key){if(!isCombat())return;var o=document.querySelectorAll("div.btn-command-back");selectedCombatChara={},sSkill=[],o.length>0&&!isNullOrUndefined(o[0])&&simulateClick(o[0])}if(combat2.includes(e.keyCode)){if(!isCombat())return;var a=combat2.indexOf(e.keyCode);shortcutSelectChara(a)}if(combat.includes(e.keyCode)){if(!isCombat())return;a=combat.indexOf(e.keyCode);shortcutSkill(a)}});