const isNullOrUndefined=e=>null==e,numberWithCommas=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),numberFormat=(e,t)=>Math.abs(Number(e))>=1e9?0===t?parseFloat((Math.abs(Number(e))/1e9).toFixed(2)):parseFloat((Math.abs(Number(e))/1e9).toFixed(2))+" b":Math.abs(Number(e))>=1e6?0===t?parseFloat((Math.abs(Number(e))/1e6).toFixed(2)):parseFloat((Math.abs(Number(e))/1e6).toFixed(2))+" m":Math.abs(Number(e))>=1e3?0===t?parseFloat((Math.abs(Number(e))/1e3).toFixed(2)):parseFloat((Math.abs(Number(e))/1e3).toFixed(2))+" k":Math.abs(Number(e)),random=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,isCombat=()=>window.location.hash.indexOf("#raid_multi/")>-1||window.location.hash.indexOf("#raid/")>-1,simulateClick=e=>{try{let t=e.getBoundingClientRect(),n=t.top,o=t.left,i=random(t.bottom,t.top),l=random(t.right,t.left),a=.1*(t.height+t.width),u={bubbles:!0,clientX:l,clientY:i},s=new MouseEvent("mouseover",{bubbles:!0,clientX:o,clientY:n}),d=new MouseEvent("mousedown",u),r=new MouseEvent("mouseup",u),c=new MouseEvent("click",u);e.dispatchEvent(s),window.setTimeout(()=>{e.dispatchEvent(d)},a),window.setTimeout(()=>{e.dispatchEvent(r),e.dispatchEvent(c)},a*random(1.1,1.3))}catch(e){console.log(e)}},pResetBonus=()=>{let e=document.querySelector("div.prt-bonus-reset-button.btn-bonus-reset.weapon");!isNullOrUndefined(e)&&simulateClick(e)},pSpaceBar=e=>{let t,n=["div.btn-usual-ok","div.btn-usual-ok.btn-summon-use","div.btn-settle","div.btn-synthesis","div.btn-usual-text.exchange","div.btn-usual-text.buy","div.btn-evolution.active","div.btn-use-item","div.btn-follow-again","div.btn-usual-exchange","div.btn-move-division","div.btn-usual-close"],o=document.querySelector(n[0]);if(isNullOrUndefined(o))for(let e=1;e<n.length;e++){let o=document.querySelector(n[e]);isNullOrUndefined(o)?"div.btn-evolution.active"===n[e]&&(t=document.querySelector("#btn-evolution")):t=o}else t=document.querySelector(n[0]).className.includes("btn-usual-ok")?document.querySelector(n[0]):document.querySelectorAll(n[0])[1];if(!isNullOrUndefined(t)){let e=document.querySelector("div.onm-anim-mask");isNullOrUndefined(e)||"none"!==getComputedStyle(e).getPropertyValue("display")?simulateClick(t):simulateClick(e)}};let combat=[81,87,69,82],combat2=[49,50,51,52];document.addEventListener("keydown",function(e){if(32===e.which){let t=!0,n=document.querySelectorAll("textarea");for(let e=0;e<n.length;e++)isNullOrUndefined(n[e].getAttribute("disabled")&&1==n[e].getAttribute("disabled"))||(t=!1);if(t)return!0;pSpaceBar(e),e.preventDefault(),e.stopPropagation()}if(67===e.keyCode&&pCA(),82===e.keyCode&&pResetBonus(),"Escape"===e.key||"Esc"===e.key){if(!isCombat())return;let e=document.querySelectorAll("div.btn-command-back");selectedCombatChara={},sSkill=[],e.length>0&&!isNullOrUndefined(e[0])&&simulateClick(e[0])}if(combat2.includes(e.keyCode)){if(!isCombat())return;let t=combat2.indexOf(e.keyCode);shortcutSelectChara(t)}if(combat.includes(e.keyCode)){if(!isCombat())return;var t=combat.indexOf(e.keyCode);shortcutSkill(t)}});