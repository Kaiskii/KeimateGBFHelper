function showSkillCD(){if(isCombat()){for(var e=document.querySelectorAll("[ability-id]"),t=[],i=0;i<=3;i++){for(var r={skills:[]},l=0;l<e.length;l++)if(!0===e[l].outerHTML.includes("ability-character-num-"+(i+1))){var a=e[l].getAttribute("ability-recast");isNullOrUndefined(a)||r.skills.push(a)}t.push(r)}var n=[],o=document.querySelectorAll("div.prt-ability-state");for(i=0;i<o.length;i++)i<=3&&n.push(o[i]);for(i=0;i<n.length;i++){var s=0,c=document.querySelectorAll("div.prt-ability-state")[i].childNodes;for(l=0;l<c.length;l++)if(l%2==1){var d=t[i].skills[s];isNullOrUndefined(d)||("0"===d&&(d=""),c[l].innerHTML='<p style="position: relative;color:black;font-weight:bold;font-size: 6px;text-align: center;top: -4px;text-shadow: 0 0 10px #ffffff, 0 0 10px #ffffff;">'+d+"</p>"),s++}}}}function pCA(){if(isCombat()){var e=document.querySelector("div.btn-lock.lock1"),t=document.querySelector("div.btn-lock.lock0");!isNullOrUndefined(e)&&simulateClick(e),!isNullOrUndefined(t)&&simulateClick(t)}}function showBossHP(){if(isCombat())try{var e=stage.pJsnData.boss,t=-1,i=document.querySelectorAll("div.prt-gauge-area")[0].childNodes;i.forEach(function(i,r){if(!isNullOrUndefined(i.className)&&i.classList.contains("prt-enemy-percent")){t++;var l=numberWithCommas(numberFormat(e.param[t].hp,1)+" / "+numberFormat(e.param[t].hpmax),1),a=(e.param[t].hp/e.param[t].hpmax*100).toFixed(1),n=e.number;e.param.forEach(function(e,t){0===e.alive&&n--}),n>1?(i.childNodes[1].innerText=a+"%\n ("+l+")",i.childNodes[1].style.cssText="text-shadow: 0 0 1px #731400, 0 0 1px #731400, 0 0 1px #731400, 0 0 1px #731400, 0 0 2px #731400, 0 0 2px #731400, 0 0 2px #731400, 0 0 2px #731400; display: -webkit-box; margin: -34px 0 0 -20px; font-size:12px; width: 200px !important"):(i.childNodes[1].innerText=a+"%\t("+l+")",i.childNodes[1].style.cssText="text-shadow: 0 0 1px #731400, 0 0 1px #731400, 0 0 1px #731400, 0 0 1px #731400, 0 0 2px #731400, 0 0 2px #731400, 0 0 2px #731400, 0 0 2px #731400; display: -webkit-box; margin: -6px 0 0 70px; font-size:15px; width: 300px !important")}})}catch(e){ReferenceError}}function pResetBonus(){var e=document.querySelector("div.prt-bonus-reset-button.btn-bonus-reset.weapon");!isNullOrUndefined(e)&&simulateClick(e)}function setCharaSkill(e){sSkill=[];var t=document.querySelectorAll("div.prt-ability-list")[e].childNodes;sSkill=t.filter(function(e){if(!isNullOrUndefined(e.className)&&e.className.includes("btn-ability"))return e})}function shortcutSelectChara(e){try{simulateClick(document.querySelectorAll("div.lis-character"+e+".btn-command-character")[0]),setCharaSkill(e)}catch(e){}}function shortcutSkill(e){try{sSkill[e].className.includes("btn-ability-available")&&simulateClick(sSkill[e])}catch(e){}}var selectedCombatChara,sSkill=[];document.addEventListener("click",function(e){!isCombat()||isNullOrUndefined(e.target.parentNode)||isNullOrUndefined(e.target.parentNode.getAttribute("pos"))||(selectedCombatChara={},sSkill=[],selectedCombatChara=e.target.parentNode,setCharaSkill(selectedCombatChara.getAttribute("pos")))});var ready=function(){if(isCombat()){var e=document.querySelectorAll("[ability-id]");if(e.length>0&&document.querySelectorAll("div.prt-gauge-area")[0].childNodes.length>0){for(var t=0;t<e.length;t++)observer.observe(e[t],{attributes:!0,childList:!0,characterData:!0});var i=document.querySelectorAll("[id^=enemy-hp]");for(t=0;t<i.length;t++)observer.observe(i[t],{attributes:!0,childList:!0,characterData:!0});try{showSkillCD(),showBossHP()}catch(e){ReferenceError}}}window.requestAnimationFrame(ready)};window.requestAnimationFrame(ready);